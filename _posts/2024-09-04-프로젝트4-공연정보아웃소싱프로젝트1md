---
title: "í”„ë¡œì íŠ¸4_ê³µì—°ì •ë³´_ì•„ì›ƒì†Œì‹± í”„ë¡œì íŠ¸1"
excerpt: "í”„ë¡œì íŠ¸ì§„í–‰"

categories:
  - Categories6
tags:
  - [tag1, tag2]

permalink: /categories6/teamproject4-1/

toc: true
toc_sticky: true

date: 2024-09-12
last_modified_at: 2024-09-12
---

## ğŸ¦¥ ë³¸ë¬¸

> # ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ ì‹œì‘ & ì™€ì´ì–´í”„ë ˆì„ & ê¸°íš & APIì„ ì • ë° ì—°ê²°

### ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” ì™¸ë¶€APIë¥¼ ì—°ê²°í•´ zustandì™€ tanstackQueryë¥¼ ì‚¬ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤. í‰ì†Œ ì˜ˆìˆ  ê³µì—°ì— ê´€ì‹¬ì´ ë§ì•˜ê³  íŒ€ì›ë“¤ì—ê²Œ ì ê·¹ì ìœ¼ë¡œ êµ¬ì²´ì ì¸ ê¸°íšì„ ì´ì•¼ê¸°í•´ ì œì‹œí•œ ì˜ê²¬ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê²Œ ë˜ì—ˆë‹¤.ë‚˜ëŠ” ì´ë²ˆì— ìƒì„¸í˜ì´ì§€ë¥¼ ë§¡ê²Œ ë˜ì—ˆê³  ì¹´ì¹´ì˜¤ì§€ë„ APIë¥¼ ì´ìš©í•´ ì¥ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ê³µì—°ì¥ì •ë³´, ì¶œì—°ì§„ ë“± ì •ë³´ë¥¼ ì†Œê°œí•  ìˆ˜ ìˆë„ë¡ ë§Œë“¤ë ¤ê³  í–ˆë‹¤. ëŒ“ê¸€ ê¸°ëŠ¥ CRUDë¥¼ êµ¬í˜„í•˜ê³  ì´ê²ƒì„ TanstackQuery ë¡œ ê´€ë¦¬í•  ì˜ˆì •ì´ë‹¤.

- í”„ë¡œì íŠ¸ ëª… : ê³µì—° ê³µìœ  í˜ì´ì§€
- ì†Œê°œ
  - í•œ ì¤„ ì •ë¦¬ : ê³µì—°ì„ ê³µìœ í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€
  - ë‚´ìš© :
    ë©”ì¸í˜ì´ì§€ - í˜„ì¬ ìƒì˜ì¤‘ì¸ ê³µì—°(ì¼ì£¼ì¼), ë‚´ ìœ„ì¹˜ ì£¼ë³€ ê³µì—°ì¥
    ì¹´í…Œê³ ë¦¬ - ì¥ì†Œë¡œ ê²€ìƒ‰í•˜ê¸°, ì¥ë¥´ë¡œ ê²€ìƒ‰í•˜ê¸°, ê²€ìƒ‰ë°” (+ì‹œê°„ë˜ë©´ ë‚ ì§œ í¬í•¨)
    ìƒì„¸í˜ì´ì§€ - ê³µì—° ì¥ì†Œ(ì§€ë„APIë¥¼ ì‚¬ìš©í•´ ìœ„ì¹˜ ë³´ì—¬ì¤Œ), ê³µì—° ìŒì•…, ëŒ“ê¸€, ë¶ë§ˆí¬
    ì»¤ë®¤ë‹ˆí‹° - ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ìŒì•…ê³¼ ê³µì—°ì¥ ì†Œê°œ
    ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, íšŒì›ê°€ì…

#### â˜˜ï¸ Kopis APIì—°ê²°

```js
import axios from "axios";
import { XMLParser } from "fast-xml-parser";

const URL = "https://www.kopis.or.kr/openApi/restful/pblprfr";

const fetchKopisData = async () => {
  try {
    const response = await axios.get(URL, {
      params: {
        service: import.meta.env.VITE_KOPIS_KEY,
        stdate: "20240101",
        eddate: "20241231",
        cpage: 1,
        rows: 10,
      },
ë°›ì„ ë•Œ ì„¤ì •
    });


export default fetchKopisData;

```

### ğŸ’¥ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

kopis APIëŠ” jsonì´ ì•„ë‹ˆë¼ XMLë¡œ OPENAPIë¥¼ ì œê³µí•˜ê³  ìˆì–´ì„œ ì´ê²ƒì„ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í–ˆë‹¤.
ë‹¹í™© x100ì´ì—ˆì§€ë§Œ í•œë‹¨ê³„ì”© ì°¨ê·¼ì°¨ê·¼ í•´ê²°í•´ë³´ì•˜ë‹¤.

1. ìš°ì„  kopis API pdfë¥¼ ì½ìœ¼ë©° í•„ìˆ˜ì ìœ¼ë¡œ ì—°ê²°í•´ì£¼ì–´ì•¼ í•˜ëŠ” paramsë¥¼ ì ì–´ì£¼ì—ˆë‹¤.
2. API_KEYëŠ” .env í™˜ê²½ë³€ìˆ˜ì— ì €ì¥í•´ gitignoreì—ë„ ì¶”ê°€í•´ì„œ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ë§‰ì•„ì£¼ì—ˆë‹¤.
3. XMLì„ jsonìœ¼ë¡œ íŒŒì‹±í•˜ê¸° ìœ„í•´ ì•„ë˜ ë¡œì§ì„ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.

```js
import axios from "axios";
import { XMLParser } from "fast-xml-parser";

const URL = "https://www.kopis.or.kr/openApi/restful/pblprfr";

const fetchKopisData = async () => {
  try {
    const response = await axios.get(URL, {
      params: {
        service: import.meta.env.VITE_KOPIS_KEY,
        stdate: "20240101",
        eddate: "20241231",
        cpage: 1,
        rows: 10,
      },
      responseType: "text", // XMLë¡œ ì‘ë‹µì„ ë°›ì„ ë•Œ ì„¤ì •
    });

    // XML ë°ì´í„° ì¶œë ¥
    console.log("Raw XML Data:", response.data);

    // XMLì„ JSONìœ¼ë¡œ ë³€í™˜
    const parser = new XMLParser({
      ignoreAttributes: false,
      allowBooleanAttributes: true,
      attributeNamePrefix: "@_", // ì†ì„±ì— '@_' ì ‘ë‘ì‚¬ ë¶™ì´ê¸°
      textNodeName: "#text", // í…ìŠ¤íŠ¸ ë…¸ë“œ ì´ë¦„
      ignoreNameSpace: true, // ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë¬´ì‹œ
    });
    const jsonData = parser.parse(response.data);

    // JSON ë°ì´í„° ì½˜ì†”ì— ì¶œë ¥
    console.log("Parsed JSON Data:", JSON.stringify(jsonData, null, 2));

    return jsonData;
  } catch (error) {
    console.error("ë°ì´í„° ìš”ì²­ ì¤‘ ì—ëŸ¬ ë°œìƒ:", error);
    throw error;
  }
};

export default fetchKopisData;
```

## ğŸ¥¹ ë³´ì™„í•  ì 

ê³„ì†í•´ì„œ CORSì˜¤ë¥˜ê°€ ëœ¨ëŠ”ë° ì–´ë–»ê²Œ ì´ê²ƒì„ í•´ê²°í•´ì•¼í•  ì§€ ëª¨ë¥´ê² ë‹¤. ë°©ë²•ì„ ì°¾ì•„ì•¼í•  ê²ƒ ê°™ë‹¤.
