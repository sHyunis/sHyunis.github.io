---
title: "Next.js_React Hook Form /w Zod"
excerpt: "SETUP"

categories:
  - Categories9
tags:
  - [tag1, tag2]

permalink: /categories9/Next.js ÏàôÎ†®2/

toc: true
toc_sticky: true

date: 2024-09-28
last_modified_at: 2024-09-28
---

# Ïù∏Ï¶ùÏù∏Í∞Ä, tanstackQuery, Zustand

## ‚òòÔ∏è Ï†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏ÏôÄ ÎπÑÏ†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏

Ï†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏
: Î¶¨Ïï°Ìä∏ÏóêÏÑú Í∞íÏù¥ Ï†úÏñ¥ÎêòÎäî Ïª¥Ìè¨ÎÑåÌä∏
ÎπÑÏ†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏
: Î¶¨ÏóëÌä∏ÏóêÏÑú Í∞íÏù¥ Ï†úÏñ¥ÎêòÏßÄ ÏïäÎäî Ïª¥Ìè¨ÎÑåÌä∏

- Ï¶âÍ∞ÅÏ†ÅÏúºÎ°ú, Ïã§ÏãúÍ∞ÑÏúºÎ°ú Í∞íÏóê ÎåÄÌïú ÌîºÎìúÎ∞±Ïù¥ ÌïÑÏöîÌïòÎã§ => Ï†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏
- Ï¶âÍ∞ÅÏ†ÅÏù∏ ÌîºÎìúÎ∞±Ïù¥ Î∂àÌïÑÏöîÌïòÍ≥† Ï†úÏ∂úÏãúÏóêÎßå Í∞íÏù¥ ÌïÑÏöîÌïòÎã§, Î∂àÌïÑÏöîÌïú Î†åÎçîÎßÅÍ≥º Í∞í ÎèôÍ∏∞ÌôîÍ∞Ä Ïã´Îã§ => ÎπÑÏ†úÏñ¥ Ïª¥Ìè¨ÎÑåÌä∏ ÏÇ¨Ïö©

## üåü React Hook Form /w Zod

- ReactÎ•º Í∏∞Î∞òÏúºÎ°ú Ìïú Í≤ÄÏ¶ù ÎùºÏù¥Î∏åÎü¨Î¶¨

```js
yarn add react-hook-form
```

#### Ìèº Ïª¥Ìè¨ÎÑåÌä∏ ÏÉùÏÑ±

```js
"use client";

import { useForm } from "react-hook-form";

const SignInForm = () => {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm();

  const onSubmit = (data) => {
    console.log(data);
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-4 p-5 items-center w-full m-auto"
    >
      <div className="flex flex-col gap-2">
        <label htmlFor="email">Email</label>
        <input
          id="email"
          type="text"
          {...register("email", {
            required: "Email is required",
            pattern: {
              value: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,
              message: "Invalid email address",
            },
          })}
          placeholder="Email"
          className="text-black"
        />
        {errors.email && <p className="text-red-500">{errors.email.message}</p>}
      </div>

      <div className="flex flex-col gap-2">
        <label htmlFor="password">Password</label>
        <input
          type="password"
          {...register("password", {
            required: "Password is required",
          })}
          placeholder="Password"
          className="text-black"
        />
        {errors.password && (
          <p className="text-red-500">{errors.password.message}</p>
        )}
      </div>
      <button
        className="bg-gray-800 text-white px-4 py-2 rounded-md"
        type="submit"
      >
        Sign In
      </button>
    </form>
  );
};

export default SignInForm;
```

### React Hook From/ w Zod(2)

ZodÎäî TypeScriptÏôÄ JavaScriptÎ•º ÏúÑÌïú Ïä§ÌÇ§Îßà ÏÑ†Ïñ∏ Î∞è Í≤ÄÏ¶ù ÎùºÏù¥Î∏åÎü¨Î¶¨

1. Zod ÏÑ§Ïπò

```
yarn add zod
```

2. Í∏∞Î≥∏ ÏÇ¨Ïö©Î≤ï

- Ïä§ÌÇ§Îßà Ï†ïÏùò Î∞è Í≤ÄÏ¶ù

```js
import { z } from "zod";

const userSchema = z.object({
  firstName: z.string().min(1, "First name is required"),
  lastName: z.string().min(1, "Last name is required"),
});

try {
  userSchema.parse({ firstName: "John", lastName: "" });
} catch (e) {
  console.error(e.errors);
}
```

- React Hook From + Zod

1. React Hook FormÍ≥º ZodÎ•º Ìï®Íªò ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ @hookform/resolvers Ìå®ÌÇ§ÏßÄÎ•º ÏÑ§Ïπò

```js
yarn add @hookform/resolvers
```

2. Ìèº Ïª¥Ìè¨ÎÑåÌä∏Ïóê ZodÎ•º ÌÜµÌï©

```js
"use client";

import { zodResolver } from "@hookform/resolvers/zod";
import { FieldValues, useForm } from "react-hook-form";
import { z } from "zod";

const signInSchema = z.object({
  email: z.string().email({ message: "invalid email" }).min(1, {
    message: "email required",
  }),

  password: z.string(),
});

const SignInForm = () => {
  const { register, handleSubmit, formState } = useForm({
    mode: "onChange",
    defaultValues: {
      email: "",
      password: "",
    },
    resolver: zodResolver(signInSchema),
  });

  const onSubmit = async (value: FieldValues) => {
    const res = await fetch("/api/sign-in", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        ...value,
      }),
    });

    const data = await res.json();
    console.log(data);
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-4 p-5 items-center w-full m-auto"
    >
      <div className="flex flex-col gap-2">
        <label htmlFor="email">Email</label>
        <input
          {...register("email")}
          placeholder="Email"
          className="text-black"
        />
        {formState.errors.email && (
          <span>{formState.errors.email.message}</span>
        )}
      </div>

      <div className="flex flex-col gap-2">
        <label htmlFor="password">Password</label>
        <input
          type="password"
          {...register("password")}
          placeholder="Password"
          className="text-black"
        />
      </div>
      <button
        disabled={!formState.isValid}
        className="bg-gray-800 text-white px-4 py-2 rounded-md"
        type="submit"
      >
        Sign In
      </button>
    </form>
  );
};

export default SignInForm;
```

- ÎπÑÎèôÍ∏∞ Í≤ÄÏ¶ù
  : ÎπÑÎèôÍ∏∞ Í≤ÄÏ¶ùÏùÑ ÏúÑÌï¥ÏÑúÎäî resolverÏòµÏÖòÏùÑ ÏÇ¨Ïö©. ÏòàÎ•º Îì§Ïñ¥ , ÏÑúÎ≤ÑÏóêÏÑú Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨Î•º ÏàòÌñâÏãú ÏÑ§Ï†ï

```js
"use client";

import React from "react";
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";

const schema = z.object({
  email: z.string().email("Invalid email").nonempty("Email is required"),
  password: z.string().nonempty("Password is required"),
});

const SignInForm = () => {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm({
    resolver: zodResolver(schema),
    mode: "onBlur",
    asyncResolver: async (values) => {
      const result = await fetch("/validate-email", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ email: values.email }),
      });

      const data = await result.json();
      if (!data.isValid) {
        return {
          values: {},
          errors: {
            email: { message: "Email already taken" },
          },
        };
      }
      return { values, errors: {} };
    },
  });

  const onSubmit = (data) => {
    console.log(data);
  };

  return (
    <form
      onSubmit={handleSubmit(onSubmit)}
      className="flex flex-col gap-4 p-5 items-center w-full m-auto"
    >
      <div className="flex flex-col gap-2">
        <label htmlFor="email">Email</label>
        <input
          id="email"
          type="text"
          {...register("email")}
          placeholder="Email"
          className="text-black"
        />
        {errors.email && <p className="text-red-500">{errors.email.message}</p>}
      </div>

      <div className="flex flex-col gap-2">
        <label htmlFor="password">Password</label>
        <input
          type="password"
          {...register("password")}
          placeholder="Password"
          className="text-black"
        />
        {errors.password && (
          <p className="text-red-500">{errors.password.message}</p>
        )}
      </div>
      <button
        className="bg-gray-800 text-white px-4 py-2 rounded-md"
        type="submit"
      >
        Sign In
      </button>
    </form>
  );
};

export default SignInForm;
```

---

## üåü Auth + MiddleWare

#### middleware

- ÏöîÏ≤≠Ïù¥ ÏôÑÎ£åÎêòÍ∏∞ Ï†ÑÏóê ÏΩîÎìúÎ•º Ïã§ÌñâÌï† Ïàò ÏûàÎäî Í∏∞Îä•ÏùÑ Ï†úÍ≥µ
- MiddlewareÏóêÏÑúÎäî Îì§Ïñ¥Ïò§Îäî ÏöîÏ≤≠ÏùÑ Í∏∞Î∞òÏúºÎ°ú ÏùëÎãµÏùÑ Ïû¨ÏûëÏÑ±, Î¶¨Îã§Ïù¥Î†âÌä∏, ÏöîÏ≤≠ ÎòêÎäî ÏùëÎãµÌó§ÎçîÏàòÏ†ï, ÌòπÏùÄ ÏßÅÏ†ë ÏùëÎãµ Í∞ÄÎä•

(appÎîîÎ†âÌÜ†Î¶¨ÏôÄ ÎèôÏùºÌïúÏúÑÏπòÏóê middleware.tsÏÉùÏÑ±)
middleware.ts

```js
import { NextResponse } from "next/server";
import type { NextRequest } from "next/server";

// This function can be marked `async` if using `await` inside
export function middleware(request: NextRequest) {
  return NextResponse.redirect(new URL("/home", request.url));
}

export const config = {
  matcher: "/about/:path*",
};
```

2. matcher

- ÌäπÏ†ï pathÎ°úÎßå Ìï¥Îãπ middlewareÍ∞Ä ÎèôÏûëÎêòÍ≤å ÌïòÍ≥† Ïã∂Îã§Î©¥ matcherÏÇ¨Ïö©Í∞ÄÎä•

```js
export const config = {
  matcher: "/about/:path*",
};
```

- Îã§ÏñëÌïú pathÎ•º ÎåÄÏÉÅÏúºÎ°ú matcherÎ•º ÎßåÎì§Í∏∞ ÏúÑÌï¥ÏÑúÎäî Î∞∞Ïó¥ ÌòïÏãùÏúºÎ°ú ÏÑ†Ïñ∏

- ÏïÑÎûò ÏÑ†Ïñ∏Ìïú matcherÎäî /about Ïù¥Ìïò pathÏôÄ /dashboard Ïù¥Ìïò pathÎ°ú Ìï≠ÏÉÅ middlewareÍ∞Ä ÎèôÏûëÌïòÍ≤å Ìï®

```js
export const config = {
  matcher: ["/about/:path*", "/dashboard/:path*"],
};
```

- ÏïÑÎûò Î¨∏Î≤ïÏùÄ route handler, Ï†ïÏ†ÅÌååÏùº, favicon.icoÎ•º Ï†úÏô∏ÌïòÍ≥†Îäî middlewareÍ∞Ä ÎèôÏûë

```js
export const config = {
  matcher: [
    /*
     * Match all request paths except for the ones starting with:
     * - api (API routes)
     * - _next/static (static files)
     * - _next/image (image optimization files)
     * - favicon.ico (favicon file)
     */
    "/((?!api|_next/static|_next/image|favicon.ico).*)",
  ],
};
```

### Ï°∞Í±¥Î¨∏

ÎßåÏïΩ ÎèôÏ†ÅÏù∏ Í∞íÏúºÎ°ú matcherÎ•º ÏûëÎèôÏãúÌÇ§Í≥† Ïã∂Í±∞ÎÇò pathÍ∞Ä ÎèôÏùºÌïòÎçîÎùºÎèÑ ÌäπÏ†ï Ï°∞Í±¥ÏóêÎßå middlewareÎ•º ÏûëÎèôÏãúÏºúÏïº ÌïúÎã§Î©¥ middleware Ìï®Ïàò ÎÇ¥Î∂ÄÏóê¬†Ï°∞Í±¥Î¨∏ÏóêÏÑú Ïù¥Î•º Ï∂©Ï°±ÏãúÌÇ¨ Ïàò ÏûàÏùå

#### 1. NextResponse

ÏòàÏ†ú ÏΩîÎìúÏóêÏÑúÎäî middlewareÏóêÏÑú responseÎ•º ÏÉùÏÑ±Ìï¥ÏÑú ÏÇ¨Ïö©ÏûêÏóêÍ≤å Î∞îÎ°ú ÏùëÎãµÏùÑ Ï†ÑÎã¨

```js
import { NextResponse } from "next/server";
import type { NextRequest } from "next/server";

export function middleware(request: NextRequest) {
  if (request.nextUrl.pathname.startsWith("/about")) {
    return NextResponse.rewrite(new URL("/about-2", request.url));
  }

  if (request.nextUrl.pathname.startsWith("/dashboard")) {
    return NextResponse.rewrite(new URL("/dashboard/user", request.url));
  }
}
```

NextResposneÎ•º ÌÜµÌï¥ ÏÇ¨Ïö©ÏûêÎ•º ÌäπÏ†ï urlÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏ ÏãúÌÇ§Í±∞ÎÇò ÏöîÏ≤≠Ìïú urlÏùÄ Í∑∏ÎåÄÎ°ú ÎÖ∏Ï∂úÌïòÎ©¥ÏÑú ÌäπÏ†ï Í≤ΩÎ°úÎ°ú Ïù¥ÎèôÏãúÌÇ§Îäî rewriteÎ•º ÏàòÌñâ

---

## ‚òòÔ∏è Ïù∏Ï¶ùÏ¢ÖÎ•ò

- OAuth/OpenID Connect (OIDC): ÏÇ¨Ïö©Ïûê ÏûêÍ≤© Ï¶ùÎ™ÖÏùÑ Í≥µÏú†ÌïòÏßÄ ÏïäÍ≥† ÌÉÄÏÇ¨ Ï†ëÍ∑ºÏùÑ ÌôúÏÑ±ÌôîÌïú ÏÉÅÌÉúÎ°ú ÌïòÎäî Ïù∏Ï¶ù / ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ Î°úÍ∑∏Ïù∏ Î∞è Îã®Ïùº Î°úÍ∑∏Ïù∏(SSO) ÏÜîÎ£®ÏÖò
- ÏûêÍ≤© Ï¶ùÎ™Ö Í∏∞Î∞ò Î°úÍ∑∏Ïù∏(Ïù¥Î©îÏùº + ÎπÑÎ∞ÄÎ≤àÌò∏): ÏÇ¨Ïö©ÏûêÍ∞Ä Ïù¥Î©îÏùºÍ≥º ÎπÑÎ∞ÄÎ≤àÌò∏Î•º Ïù¥Ïö©Ìïú Ïù∏Ï¶ù
- ÎπÑÎ∞ÄÎ≤àÌò∏ ÏóÜÎäî/ÌÜ†ÌÅ∞ Í∏∞Î∞ò Ïù∏Ï¶ù: ÎπÑÎ∞ÄÎ≤àÌò∏ ÏóÜÎäî Ï†ëÍ∑ºÏùÑ ÏúÑÌï¥ Ïù¥Î©îÏùº ÎßÅÌÅ¨ ÎòêÎäî SMS ÏùºÌöåÏö© ÏΩîÎìúÎ•º ÏÇ¨Ïö©Ìïú Ïù∏Ï¶ù

### Í∞ÑÎã®Ìïú Ïù∏Ï¶ù ÏÑúÎ≤Ñ json-server-auth

1. ÏÑ§Ïπò Î∞è ÏÑ§Ï†ï

```js
yarn add -D json-server-auth
```

2. auth-db.jsonÏùÑ RouteÏóê ÏÉùÏÑ±
3. json-serverÎ•º ÏÑ§Ï†ïÌïòÍ≥† `json-server-auth` middlewareÎ•ºÏ∂îÍ∞Ä
4. ÏÑúÎ≤ÑÎ•º Ïã§Ìñâ

```js
yarn auth
```

#### cookie()

> Ïø†ÌÇ§ Í¥ÄÎ¶¨ Í∏∞Îä•
>
> - Ïø†ÌÇ§ ÏùΩÍ∏∞: ÌäπÏ†ï Ïø†ÌÇ§Î•º Í∞ÄÏ†∏Ïò§Í±∞ÎÇò Î™®Îì† Ïø†ÌÇ§Î•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏûàÎã§.
> - Ïø†ÌÇ§ Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏: Ïø†ÌÇ§Ïùò Ï°¥Ïû¨ Ïó¨Î∂ÄÎ•º ÌôïÏù∏Ìï† Ïàò ÏûàÎã§.
> - Ïø†ÌÇ§ ÏÑ§Ï†ï: ÏÉàÎ°úÏö¥ Ïø†ÌÇ§Î•º ÏÑ§Ï†ïÌïòÍ±∞ÎÇò Í∏∞Ï°¥ Ïø†ÌÇ§Î•º ÏóÖÎç∞Ïù¥Ìä∏Ìï† Ïàò ÏûàÎã§.
> - Ïø†ÌÇ§ ÏÇ≠Ï†ú: Ïø†ÌÇ§Î•º ÏÇ≠Ï†úÌï† Ïàò ÏûàÎäî Ïó¨Îü¨ Í∞ÄÏßÄ Î∞©Î≤ïÏùÑ Ï†úÍ≥µÌïúÎã§.

### ÌäπÏ†ïÏø†ÌÇ§ ÏùΩÍ∏∞

```js
import { cookies } from "next/headers";

export default function Page() {
  const cookieStore = cookies();
  const theme = cookieStore.get("theme");
  return "...";
}
```

- `cookies().get(name)` Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÌäπÏ†ï Ïù¥Î¶ÑÏùò Ïø†ÌÇ§Î•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏûàÏäµÎãàÎã§. ÎßåÏïΩ Ïø†ÌÇ§Í∞Ä ÏóÜÏúºÎ©¥ `undefined`Î•º Î∞òÌôò
- Î™®Îì† Ïø†ÌÇ§ Î∞òÌôò

```js
import { cookies } from "next/headers";

export default function Page() {
  const cookieStore = cookies();
  return cookieStore.getAll().map((cookie) => (
    <div key={cookie.name}>
      <p>Name: {cookie.name}</p>
      <p>Value: {cookie.value}</p>
    </div>
  ));
}
```

- Ïø†ÌÇ§ Ï°¥Ïû¨Ïó¨Î∂ÄÌôïÏù∏

```js
import { cookies } from "next/headers";

export default function Page() {
  const cookieStore = cookies();
  const hasCookie = cookieStore.has("theme");
  return "...";
}
```

2. `cookies().has(name)` Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÌäπÏ†ï Ïø†ÌÇ§Í∞Ä Ï°¥Ïû¨ÌïòÎäîÏßÄ Ïó¨Î∂ÄÎ•º ÌôïÏù∏

- Ïø†ÌÇ§ÏÑ§Ï†ï

```js
"use server";

import { cookies } from "next/headers";

async function create(data) {
  cookies().set("name", "lee");
  // or
  cookies().set("name", "lee", { secure: true });
  // or
  cookies().set({
    name: "name",
    value: "lee",
    httpOnly: true,
    path: "/",
  });
}
```

3. cookies().set(name, value, options) Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÏÉàÎ°úÏö¥ Ïø†ÌÇ§Î•º ÏÑ§Ï†ïÌïòÍ±∞ÎÇò Í∏∞Ï°¥ Ïø†ÌÇ§Î•º ÏóÖÎç∞Ïù¥Ìä∏, Î©îÏÑúÎìúÎäî ÏÑúÎ≤Ñ Ïï°ÏÖòÏù¥ÎÇò ÎùºÏö∞Ìä∏ Ìï∏Îì§Îü¨ÏóêÏÑúÎßå ÏÇ¨Ïö©

- Ïø†ÌÇ§ ÏÇ≠Ï†ú
  1.  Î™ÖÏãúÏ†Å ÏÇ≠Ï†ú

```js
'use server'

import { cookies } from 'next/headers'

async function delete(data) {
 cookies().delete('name')
}

```

    2. Îπà Í∞í ÏÑ§Ï†ï

```js
'use server'

import { cookies } from 'next/headers'

async function delete(data) {
  cookies().set('name', '')
}

```

3.ÎßåÎ£å ÏãúÍ∞Ñ ÏÑ§Ï†ï

```js
'use server'

import { cookies } from 'next/headers'

async function delete(data) {
  cookies().set('name', 'value', { maxAge: 0 })
}
```

---

# ‚òòÔ∏è ReactQuery

1. Ï∫êÏã±Ïù¥ÎûÄ?
   ÌäπÏ†ï Îç∞Ïù¥ÌÑ∞Ïùò Î≥µÏÇ¨Î≥∏ÏùÑ Ï†ÄÏû•ÌïòÏó¨ Ïù¥ÌõÑ ÎèôÏùºÌïú Îç∞Ïù¥ÌÑ∞Ïùò Ïû¨Ï†ëÍ∑º ÏÜçÎèÑÎ•º ÎÜíÏù¥Îäî Í≤É
   React QueryÏùò Ï∫êÏã± Í∏∞Îä•ÏùÑ Ïù¥Ïö©Ìï¥ Î∂àÌïÑÏöîÌïú APIÌò∏Ï∂úÏùÑ ÎßâÍ≥† Ï∫êÏã±Îêú Îç∞Ïù¥ÌÑ∞Î•º Ïù¥Ïö©Ìï† Ïàò ÏûàÎã§.
2. Stale Time, Cache Time

### react-query ÏÇ¨Ïö©Î≤ï

1. react-query ÏÑ§Ïπò

```js
yarn add @tanstack/react-query
```

2. src>components>providers>RQProvider.tsx

```js
// In Next.js, this file would be called: app/providers.jsx
"use client";

// Since QueryClientProvider relies on useContext under the hood, we have to put 'use client' on top
import {
  isServer,
  QueryClient,
  QueryClientProvider,
} from "@tanstack/react-query";

function makeQueryClient() {
  return new QueryClient({
    defaultOptions: {
      queries: {
        // With SSR, we usually want to set some default staleTime
        // above 0 to avoid refetching immediately on the client
        staleTime: 60 * 1000,
      },
    },
  });
}

let browserQueryClient: QueryClient | undefined = undefined;

function getQueryClient() {
  if (isServer) {
    // Server: always make a new query client
    return makeQueryClient();
  } else {
    // Browser: make a new query client if we don't already have one
    // This is very important, so we don't re-make a new client if React
    // suspends during the initial render. This may not be needed if we
    // have a suspense boundary BELOW the creation of the query client
    if (!browserQueryClient) browserQueryClient = makeQueryClient();
    return browserQueryClient;
  }
}

export default function Providers({ children }: { children: React.ReactNode }) {
  // NOTE: Avoid useState when initializing the query client if you don't
  //       have a suspense boundary between this and the code that may
  //       suspend because React will throw away the client on the initial
  //       render if it suspends and there is no boundary
  const queryClient = getQueryClient();

  return (
    <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
  );
}
```

src>app>layout.tsx

```js
import type { Metadata } from "next";
import { Inter } from "next/font/google";

import "./globals.css";
import Providers from "@/components/providers/RQProvider";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode,
}>) {
  return (
    <html lang="en">
      <body className={inter.className}>
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}
```

3. react-query-devtoolsÏÑ§Ïπò

---

## ‚òòÔ∏è Zustand

: Í∞ÑÏÜåÌôîÎêú FluxÏõêÎ¶¨Î•º Í∏∞Î∞òÏúºÎ°ú Ìïú ÏÉÅÌÉúÍ¥ÄÎ¶¨ ÎùºÏù¥Î∏åÎü¨Î¶¨

- Ïû•Ï†ê

1. Î≥¥ÏùºÎü¨ÌîåÎ†àÏù¥Ìä∏Ïùò ÏµúÏÜåÌôî : Î∞òÎ≥µÏ†ÅÏúºÎ°ú ÏÇ¨Ïö©Ìï¥Ïïº ÌïòÎäî ÏΩîÎìú ÏñëÏùÑ ÏµúÏÜåÌôîÌïòÏó¨ ÌîÑÎ°úÏ†ùÌä∏Ïùò Ïú†ÏßÄÎ≥¥ÏàòÎ•º ÏâΩÍ≤å Ìï®
2. ÏïÑÏ£ºÏûëÏùÄ ÌÅ¨Í∏∞ : ZustandÌïµÏã¨ Î°úÏßÅÏùÄ Î∞îÎãêÎùº ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÏàòÏã≠Ï§ÑÎ°ú Íµ¨ÏÑ±ÎêòÏñ¥ÏûàÎäîÎßåÌÅº Í∞ÄÎ≤ºÏö¥ ÎùºÏù¥Î∏åÎü¨Î¶¨Ïù¥Îã§.
3. Ìö®Ïú®Ï†ÅÏù∏ Î†åÎçîÎßÅ : ÏÉÅÌÉúÍ∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßå Ïª¥Ìè¨ÎÑåÌä∏Î•º Î†åÎçîÎßÅÌïòÎØÄÎ°ú, Î∂àÌïÑÏöîÌïú Î¶¨Î†åÎçîÎßÅÏùÑ Î∞©ÏßÄÌïòÏó¨ ÏÑ±Îä•ÏùÑ Ìñ•ÏÉÅÏãúÌÇ¥

### Zustand ÏÇ¨Ïö©Î≤ï

```js
yarn add zustand
```

2. src>components>ZustandProvider.tsx

- createStore()Î°ú storeÎßåÎì§Ïñ¥Ï£ºÍ∏∞

```js
import { Product } from "@/type/product";
import { createStore } from "zustand";

export type CartProduct = Product & { quantity: number };

export interface CartProps {
  products: CartProduct[];
}

export interface CartState extends CartProps {
  addProduct: (product: CartProduct) => void;
}

export type CartStore = ReturnType<typeof createCartStore>;

export const createCartStore = (initProps?: Partial<CartProps>) => {
  const DEFAULT_PROPS: CartProps = {
    products: [],
  };
  return createStore<CartState>()((set) => ({
    ...DEFAULT_PROPS,
    ...initProps,
    addProduct: (product: CartProduct) =>
      set((state) => ({
        products: [...state.products, product],
      })),
  }));
};

```

3. ZustandProvider.tsx

```ts
"use client";

import { useContext, useRef } from "react";
import { CartProps, CartState, CartStore, createCartStore } from "@/cartStore";
import { createContext } from "react";
import { useStore } from "zustand";

export function useCartContext<T>(selector: (state: CartState) => T): T {
  const store = useContext(CartContext);
  if (!store) throw new Error("Missing CartContext.Provider in the tree");
  return useStore(store, selector);
}

export const CartContext = createContext<CartStore | null>(null);

type CartProviderProps = React.PropsWithChildren<CartProps>;
export function CartProvider({ children, ...props }: CartProviderProps) {
  const storeRef = useRef<CartStore>();
  if (!storeRef.current) {
    storeRef.current = createCartStore(props);
  }
  return (
    <CartContext.Provider value={storeRef.current}>
      {children}
    </CartContext.Provider>
  );
}
```

## Next.js ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ï & shardcn-uiÏÇ¨Ïö©ÌïòÍ∏∞

```js
npx create-next-app@latest my-app --typescript --tailwind --eslint
```

shadcn/uiÏÑ§Ïπò

```js
npx shadcn-ui@latest init
```
